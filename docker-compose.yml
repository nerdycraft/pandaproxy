services:
  pandaproxy:
    image: ghcr.io/karaktaka/pandaproxy:latest
    container_name: pandaproxy
    restart: unless-stopped
    env_file: .env
    volumes:
      - ./certs:/home/pandaproxy/certs
    networks:
      pub_net:
        # Assign a static IP from your network that is not used by DHCP
        ipv4_address: ${PANDAPROXY_IP:-192.168.1.50}
    cap_add:
      - NET_BIND_SERVICE

networks:
  pub_net:
    driver: macvlan
    driver_opts:
      parent: eth0 # Change this to your physical interface name (e.g., eth0, eno1)
    ipam:
      config:
        - subnet: 192.168.1.0/24   # Match your physical network
          gateway: 192.168.1.1     # Match your gateway
          ip_range: 192.168.1.192/27 # Optional: restricted range for docker containers
